{"version":3,"sources":["../../src/utils/info-addon.ts"],"names":[],"mappings":"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","file":"static/js/20.5dec7aed.chunk.js","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar codemirror_1 = __importDefault(require(\"codemirror\"));\ncodemirror_1.default.defineOption('info', false, function (cm, options, old) {\n    if (old && old !== codemirror_1.default.Init) {\n        var oldOnMouseOver = cm.state.info.onMouseOver;\n        codemirror_1.default.off(cm.getWrapperElement(), 'mouseover', oldOnMouseOver);\n        clearTimeout(cm.state.info.hoverTimeout);\n        delete cm.state.info;\n    }\n    if (options) {\n        var state = (cm.state.info = createState(options));\n        state.onMouseOver = onMouseOver.bind(null, cm);\n        codemirror_1.default.on(cm.getWrapperElement(), 'mouseover', state.onMouseOver);\n    }\n});\nfunction createState(options) {\n    return {\n        options: options instanceof Function\n            ? { render: options }\n            : options === true\n                ? {}\n                : options,\n    };\n}\nfunction getHoverTime(cm) {\n    var options = cm.state.info.options;\n    return (options && options.hoverTime) || 500;\n}\nfunction onMouseOver(cm, e) {\n    var state = cm.state.info;\n    var target = e.target || e.srcElement;\n    if (!(target instanceof HTMLElement)) {\n        return;\n    }\n    if (target.nodeName !== 'SPAN' || state.hoverTimeout !== undefined) {\n        return;\n    }\n    var box = target.getBoundingClientRect();\n    var onMouseMove = function () {\n        clearTimeout(state.hoverTimeout);\n        state.hoverTimeout = setTimeout(onHover, hoverTime);\n    };\n    var onMouseOut = function () {\n        codemirror_1.default.off(document, 'mousemove', onMouseMove);\n        codemirror_1.default.off(cm.getWrapperElement(), 'mouseout', onMouseOut);\n        clearTimeout(state.hoverTimeout);\n        state.hoverTimeout = undefined;\n    };\n    var onHover = function () {\n        codemirror_1.default.off(document, 'mousemove', onMouseMove);\n        codemirror_1.default.off(cm.getWrapperElement(), 'mouseout', onMouseOut);\n        state.hoverTimeout = undefined;\n        onMouseHover(cm, box);\n    };\n    var hoverTime = getHoverTime(cm);\n    state.hoverTimeout = setTimeout(onHover, hoverTime);\n    codemirror_1.default.on(document, 'mousemove', onMouseMove);\n    codemirror_1.default.on(cm.getWrapperElement(), 'mouseout', onMouseOut);\n}\nfunction onMouseHover(cm, box) {\n    var pos = cm.coordsChar({\n        left: (box.left + box.right) / 2,\n        top: (box.top + box.bottom) / 2,\n    });\n    var state = cm.state.info;\n    var options = state.options;\n    var render = options.render || cm.getHelper(pos, 'info');\n    if (render) {\n        var token = cm.getTokenAt(pos, true);\n        if (token) {\n            var info = render(token, options, cm, pos);\n            if (info) {\n                showPopup(cm, box, info);\n            }\n        }\n    }\n}\nfunction showPopup(cm, box, info) {\n    var popup = document.createElement('div');\n    popup.className = 'CodeMirror-info';\n    popup.appendChild(info);\n    document.body.appendChild(popup);\n    var popupBox = popup.getBoundingClientRect();\n    var popupStyle = window.getComputedStyle(popup);\n    var popupWidth = popupBox.right -\n        popupBox.left +\n        parseFloat(popupStyle.marginLeft) +\n        parseFloat(popupStyle.marginRight);\n    var popupHeight = popupBox.bottom -\n        popupBox.top +\n        parseFloat(popupStyle.marginTop) +\n        parseFloat(popupStyle.marginBottom);\n    var topPos = box.bottom;\n    if (popupHeight > window.innerHeight - box.bottom - 15 &&\n        box.top > window.innerHeight - box.bottom) {\n        topPos = box.top - popupHeight;\n    }\n    if (topPos < 0) {\n        topPos = box.bottom;\n    }\n    var leftPos = Math.max(0, window.innerWidth - popupWidth - 15);\n    if (leftPos > box.left) {\n        leftPos = box.left;\n    }\n    popup.style.opacity = '1';\n    popup.style.top = topPos + 'px';\n    popup.style.left = leftPos + 'px';\n    var popupTimeout;\n    var onMouseOverPopup = function () {\n        clearTimeout(popupTimeout);\n    };\n    var onMouseOut = function () {\n        clearTimeout(popupTimeout);\n        popupTimeout = setTimeout(hidePopup, 200);\n    };\n    var hidePopup = function () {\n        codemirror_1.default.off(popup, 'mouseover', onMouseOverPopup);\n        codemirror_1.default.off(popup, 'mouseout', onMouseOut);\n        codemirror_1.default.off(cm.getWrapperElement(), 'mouseout', onMouseOut);\n        if (popup.style.opacity) {\n            popup.style.opacity = '0';\n            setTimeout(function () {\n                if (popup.parentNode) {\n                    popup.parentNode.removeChild(popup);\n                }\n            }, 600);\n        }\n        else if (popup.parentNode) {\n            popup.parentNode.removeChild(popup);\n        }\n    };\n    codemirror_1.default.on(popup, 'mouseover', onMouseOverPopup);\n    codemirror_1.default.on(popup, 'mouseout', onMouseOut);\n    codemirror_1.default.on(cm.getWrapperElement(), 'mouseout', onMouseOut);\n}\n//# sourceMappingURL=info-addon.js.map"],"sourceRoot":""}