{"version":3,"sources":["../../src/utils/jsonParse.ts","../../src/variables/lint.ts"],"names":[],"mappings":"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","file":"static/js/17.086fe6d6.chunk.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction jsonParse(str) {\n    string = str;\n    strLen = str.length;\n    start = end = lastEnd = -1;\n    ch();\n    lex();\n    var ast = parseObj();\n    expect('EOF');\n    return ast;\n}\nexports.default = jsonParse;\nvar string;\nvar strLen;\nvar start;\nvar end;\nvar lastEnd;\nvar code;\nvar kind;\nfunction parseObj() {\n    var nodeStart = start;\n    var members = [];\n    expect('{');\n    if (!skip('}')) {\n        do {\n            members.push(parseMember());\n        } while (skip(','));\n        expect('}');\n    }\n    return {\n        kind: 'Object',\n        start: nodeStart,\n        end: lastEnd,\n        members: members,\n    };\n}\nfunction parseMember() {\n    var nodeStart = start;\n    var key = kind === 'String' ? curToken() : null;\n    expect('String');\n    expect(':');\n    var value = parseVal();\n    return {\n        kind: 'Member',\n        start: nodeStart,\n        end: lastEnd,\n        key: key,\n        value: value,\n    };\n}\nfunction parseArr() {\n    var nodeStart = start;\n    var values = [];\n    expect('[');\n    if (!skip(']')) {\n        do {\n            values.push(parseVal());\n        } while (skip(','));\n        expect(']');\n    }\n    return {\n        kind: 'Array',\n        start: nodeStart,\n        end: lastEnd,\n        values: values,\n    };\n}\nfunction parseVal() {\n    switch (kind) {\n        case '[':\n            return parseArr();\n        case '{':\n            return parseObj();\n        case 'String':\n        case 'Number':\n        case 'Boolean':\n        case 'Null':\n            var token = curToken();\n            lex();\n            return token;\n    }\n    expect('Value');\n}\nfunction curToken() {\n    return { kind: kind, start: start, end: end, value: JSON.parse(string.slice(start, end)) };\n}\nfunction expect(str) {\n    if (kind === str) {\n        lex();\n        return;\n    }\n    var found;\n    if (kind === 'EOF') {\n        found = '[end of file]';\n    }\n    else if (end - start > 1) {\n        found = '`' + string.slice(start, end) + '`';\n    }\n    else {\n        var match = string.slice(start).match(/^.+?\\b/);\n        found = '`' + (match ? match[0] : string[start]) + '`';\n    }\n    throw syntaxError(\"Expected \" + str + \" but found \" + found + \".\");\n}\nfunction syntaxError(message) {\n    return { message: message, start: start, end: end };\n}\nfunction skip(k) {\n    if (kind === k) {\n        lex();\n        return true;\n    }\n}\nfunction ch() {\n    if (end < strLen) {\n        end++;\n        code = end === strLen ? 0 : string.charCodeAt(end);\n    }\n    return code;\n}\nfunction lex() {\n    lastEnd = end;\n    while (code === 9 || code === 10 || code === 13 || code === 32) {\n        ch();\n    }\n    if (code === 0) {\n        kind = 'EOF';\n        return;\n    }\n    start = end;\n    switch (code) {\n        case 34:\n            kind = 'String';\n            return readString();\n        case 45:\n        case 48:\n        case 49:\n        case 50:\n        case 51:\n        case 52:\n        case 53:\n        case 54:\n        case 55:\n        case 56:\n        case 57:\n            kind = 'Number';\n            return readNumber();\n        case 102:\n            if (string.slice(start, start + 5) !== 'false') {\n                break;\n            }\n            end += 4;\n            ch();\n            kind = 'Boolean';\n            return;\n        case 110:\n            if (string.slice(start, start + 4) !== 'null') {\n                break;\n            }\n            end += 3;\n            ch();\n            kind = 'Null';\n            return;\n        case 116:\n            if (string.slice(start, start + 4) !== 'true') {\n                break;\n            }\n            end += 3;\n            ch();\n            kind = 'Boolean';\n            return;\n    }\n    kind = string[start];\n    ch();\n}\nfunction readString() {\n    ch();\n    while (code !== 34 && code > 31) {\n        if (code === 92) {\n            code = ch();\n            switch (code) {\n                case 34:\n                case 47:\n                case 92:\n                case 98:\n                case 102:\n                case 110:\n                case 114:\n                case 116:\n                    ch();\n                    break;\n                case 117:\n                    ch();\n                    readHex();\n                    readHex();\n                    readHex();\n                    readHex();\n                    break;\n                default:\n                    throw syntaxError('Bad character escape sequence.');\n            }\n        }\n        else if (end === strLen) {\n            throw syntaxError('Unterminated string.');\n        }\n        else {\n            ch();\n        }\n    }\n    if (code === 34) {\n        ch();\n        return;\n    }\n    throw syntaxError('Unterminated string.');\n}\nfunction readHex() {\n    if ((code >= 48 && code <= 57) ||\n        (code >= 65 && code <= 70) ||\n        (code >= 97 && code <= 102)) {\n        return ch();\n    }\n    throw syntaxError('Expected hexadecimal digit.');\n}\nfunction readNumber() {\n    if (code === 45) {\n        ch();\n    }\n    if (code === 48) {\n        ch();\n    }\n    else {\n        readDigits();\n    }\n    if (code === 46) {\n        ch();\n        readDigits();\n    }\n    if (code === 69 || code === 101) {\n        code = ch();\n        if (code === 43 || code === 45) {\n            ch();\n        }\n        readDigits();\n    }\n}\nfunction readDigits() {\n    if (code < 48 || code > 57) {\n        throw syntaxError('Expected decimal digit.');\n    }\n    do {\n        ch();\n    } while (code >= 48 && code <= 57);\n}\n//# sourceMappingURL=jsonParse.js.map","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar codemirror_1 = __importDefault(require(\"codemirror\"));\nvar graphql_1 = require(\"graphql\");\nvar jsonParse_1 = __importDefault(require(\"../utils/jsonParse\"));\ncodemirror_1.default.registerHelper('lint', 'graphql-variables', function (text, options, editor) {\n    if (!text) {\n        return [];\n    }\n    var ast;\n    try {\n        ast = jsonParse_1.default(text);\n    }\n    catch (syntaxError) {\n        if (syntaxError.stack) {\n            throw syntaxError;\n        }\n        return [lintError(editor, syntaxError, syntaxError.message)];\n    }\n    var variableToType = options.variableToType;\n    if (!variableToType) {\n        return [];\n    }\n    return validateVariables(editor, variableToType, ast);\n});\nfunction validateVariables(editor, variableToType, variablesAST) {\n    var errors = [];\n    variablesAST.members.forEach(function (member) {\n        var _a;\n        if (member) {\n            var variableName = (_a = member.key) === null || _a === void 0 ? void 0 : _a.value;\n            var type = variableToType[variableName];\n            if (!type) {\n                errors.push(lintError(editor, member.key, \"Variable \\\"$\" + variableName + \"\\\" does not appear in any GraphQL query.\"));\n            }\n            else {\n                validateValue(type, member.value).forEach(function (_a) {\n                    var _b = __read(_a, 2), node = _b[0], message = _b[1];\n                    errors.push(lintError(editor, node, message));\n                });\n            }\n        }\n    });\n    return errors;\n}\nfunction validateValue(type, valueAST) {\n    if (!type || !valueAST) {\n        return [];\n    }\n    if (type instanceof graphql_1.GraphQLNonNull) {\n        if (valueAST.kind === 'Null') {\n            return [[valueAST, \"Type \\\"\" + type + \"\\\" is non-nullable and cannot be null.\"]];\n        }\n        return validateValue(type.ofType, valueAST);\n    }\n    if (valueAST.kind === 'Null') {\n        return [];\n    }\n    if (type instanceof graphql_1.GraphQLList) {\n        var itemType_1 = type.ofType;\n        if (valueAST.kind === 'Array') {\n            var values = valueAST.values || [];\n            return mapCat(values, function (item) { return validateValue(itemType_1, item); });\n        }\n        return validateValue(itemType_1, valueAST);\n    }\n    if (type instanceof graphql_1.GraphQLInputObjectType) {\n        if (valueAST.kind !== 'Object') {\n            return [[valueAST, \"Type \\\"\" + type + \"\\\" must be an Object.\"]];\n        }\n        var providedFields_1 = Object.create(null);\n        var fieldErrors_1 = mapCat(valueAST.members, function (member) {\n            var _a;\n            var fieldName = (_a = member === null || member === void 0 ? void 0 : member.key) === null || _a === void 0 ? void 0 : _a.value;\n            providedFields_1[fieldName] = true;\n            var inputField = type.getFields()[fieldName];\n            if (!inputField) {\n                return [\n                    [\n                        member.key,\n                        \"Type \\\"\" + type + \"\\\" does not have a field \\\"\" + fieldName + \"\\\".\",\n                    ],\n                ];\n            }\n            var fieldType = inputField ? inputField.type : undefined;\n            return validateValue(fieldType, member.value);\n        });\n        Object.keys(type.getFields()).forEach(function (fieldName) {\n            if (!providedFields_1[fieldName]) {\n                var fieldType = type.getFields()[fieldName].type;\n                if (fieldType instanceof graphql_1.GraphQLNonNull) {\n                    fieldErrors_1.push([\n                        valueAST,\n                        \"Object of type \\\"\" + type + \"\\\" is missing required field \\\"\" + fieldName + \"\\\".\",\n                    ]);\n                }\n            }\n        });\n        return fieldErrors_1;\n    }\n    if ((type.name === 'Boolean' && valueAST.kind !== 'Boolean') ||\n        (type.name === 'String' && valueAST.kind !== 'String') ||\n        (type.name === 'ID' &&\n            valueAST.kind !== 'Number' &&\n            valueAST.kind !== 'String') ||\n        (type.name === 'Float' && valueAST.kind !== 'Number') ||\n        (type.name === 'Int' &&\n            (valueAST.kind !== 'Number' || (valueAST.value | 0) !== valueAST.value))) {\n        return [[valueAST, \"Expected value of type \\\"\" + type + \"\\\".\"]];\n    }\n    if (type instanceof graphql_1.GraphQLEnumType || type instanceof graphql_1.GraphQLScalarType) {\n        if ((valueAST.kind !== 'String' &&\n            valueAST.kind !== 'Number' &&\n            valueAST.kind !== 'Boolean' &&\n            valueAST.kind !== 'Null') ||\n            isNullish(type.parseValue(valueAST.value))) {\n            return [[valueAST, \"Expected value of type \\\"\" + type + \"\\\".\"]];\n        }\n    }\n    return [];\n}\nfunction lintError(editor, node, message) {\n    return {\n        message: message,\n        severity: 'error',\n        type: 'validation',\n        from: editor.posFromIndex(node.start),\n        to: editor.posFromIndex(node.end),\n    };\n}\nfunction isNullish(value) {\n    return value === null || value === undefined || value !== value;\n}\nfunction mapCat(array, mapper) {\n    return Array.prototype.concat.apply([], array.map(mapper));\n}\n//# sourceMappingURL=lint.js.map"],"sourceRoot":""}